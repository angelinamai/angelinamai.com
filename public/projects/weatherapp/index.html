<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" href="/projects/weatherapp/favicon.ico" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0f766e" />
  <meta name="description" content="Classy Weather â€” forecast by city" />
  <title>Weather Forecast</title>

  <!-- Fonts -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700;800&display=swap"
    rel="stylesheet" />

  <!-- Weather app build CSS (relative to /projects/weatherapp/index.html) -->
  <link rel="stylesheet" href="./static/css/main.28420eaf.css" />

  <!-- Brand/UX overrides -->
  <style>
    :root {
      --brand: #0f766e;
      /* main teal */
      --brand-2: #15998f;
      /* hover teal */
      --ink: #0f172a;
      /* titles */
      --muted: #475569;
      /* secondary text */
      --page: #f7fafc;
      /* page bg */
      --card: #ffffff;
      /* card bg */
      --ring: rgba(15, 118, 110, .28);
      --stroke: rgba(2, 6, 23, .08);
      --radius-lg: 18px;
      --radius-md: 14px;
      --shadow-lg: 0 10px 30px rgba(2, 6, 23, .08), 0 2px 6px rgba(2, 6, 23, .06);
      --shadow-md: 0 6px 20px rgba(2, 6, 23, .06);
    }

    html,
    body {
      height: 100%;
      background:
        radial-gradient(1200px 600px at 50% -10%, rgba(15, 118, 110, .10) 0%, rgba(15, 118, 110, 0) 45%),
        var(--page) !important;
      color: var(--ink);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* Pink background removal */
    [style*="#e7b9b3" i],
    [style*="rgb(231, 185, 179)"],
    [style*="rgba(231, 185, 179"] {
      background: var(--card) !important;
      background-color: var(--card) !important;
    }

    .bg-rose-50,
    .bg-rose-100,
    .bg-rose-200,
    .bg-pink-50,
    .bg-pink-100,
    .bg-pink-200 {
      background: var(--card) !important;
      background-color: var(--card) !important;
    }

    .card,
    .panel,
    .tile,
    .today,
    .forecast,
    .result,
    .day {
      background: var(--card) !important;
      background-color: var(--card) !important;
    }

    /* Optional frame styling */
    .frame,
    .wrapper,
    .container {
      background: var(--card) !important;
      border: 1px solid var(--stroke);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-lg);
      padding: clamp(20px, 2.2vw, 28px) !important;
      position: relative;
    }

    .frame::before {
      content: "";
      position: absolute;
      inset: 18px;
      border: 1px solid rgba(15, 23, 42, .55);
      border-radius: calc(var(--radius-lg) - 8px);
      pointer-events: none;
    }

    /* Titles */
    .title,
    h1,
    h1.title,
    .app-title {
      font-family: "Playfair Display", ui-serif, Georgia, "Times New Roman", serif !important;
      font-weight: 800 !important;
      font-size: clamp(28px, 3.6vw, 44px) !important;
      line-height: 1.15;
      letter-spacing: .01em;
      color: var(--ink) !important;
      text-align: center;
      margin: 0 0 14px !important;
    }

    /* Inputs */
    input[type="text"],
    input[type="search"] {
      background: #fff !important;
      color: var(--ink) !important;
      border: 2px solid var(--brand) !important;
      border-radius: 999px !important;
      padding: .72rem 1rem !important;
      outline: none !important;
      box-shadow: 0 2px 0 rgba(15, 118, 110, .10) inset !important;
      transition: border-color .18s ease, box-shadow .18s ease;
    }

    input::placeholder {
      color: #94a3b8 !important;
    }

    input:focus {
      border-color: var(--brand-2) !important;
      box-shadow: 0 0 0 3px var(--ring) !important;
    }

    /* Buttons */
    button,
    .btn,
    [role="button"],
    input[type="button"],
    input[type="submit"] {
      border: none !important;
      border-radius: 999px !important;
      background: var(--brand) !important;
      color: #fff !important;
      padding: .72rem 1.2rem !important;
      font-weight: 700 !important;
      letter-spacing: .02em;
    }

    button:hover,
    .btn:hover,
    [role="button"]:hover,
    input[type="submit"]:hover {
      background: var(--brand-2) !important;
      transform: translateY(-2px);
      box-shadow: 0 8px 22px rgba(15, 118, 110, .22);
    }

    /* Section headings */
    h2,
    .section-title {
      font-weight: 800 !important;
      color: var(--brand) !important;
      text-align: center;
      margin: 20px 0 10px;
    }

    /* Card text tones */
    .muted,
    .sub,
    .hint,
    .desc {
      color: var(--muted) !important;
    }
  </style>
</head>

<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>
  <script>
    (() => {
      // Match keys that might store the last location/forecast
      const match = /weather|classy|city|location|forecast|meteo/i;

      try {
        for (let i = localStorage.length - 1; i >= 0; i--) {
          const k = localStorage.key(i);
          if (match.test(k)) localStorage.removeItem(k);
        }
        for (let i = sessionStorage.length - 1; i >= 0; i--) {
          const k = sessionStorage.key(i);
          if (match.test(k)) sessionStorage.removeItem(k);
        }
      } catch (_) { }

      // Optional: block future saves for these keys during this page load
      const _set = localStorage.setItem.bind(localStorage);
      localStorage.setItem = (k, v) => { if (!match.test(k)) _set(k, v); };
    })();
  </script>
  <script>
    (() => {
      const NEW = "Weather Forecast";

      function tryUpdate() {
        const el = document.querySelector("h1, .title, .app-title");
        if (el && /classy weather/i.test(el.textContent)) {
          el.textContent = NEW;
          return true;
        }
        return false;
      }

      // If it's not there yet, watch for React to render it.
      if (!tryUpdate()) {
        const root = document.getElementById("root");
        const obs = new MutationObserver(() => { if (tryUpdate()) obs.disconnect(); });
        if (root) obs.observe(root, { childList: true, subtree: true });
      }
    })();
  </script>


  <!-- Weather app build JS (relative) -->
  <script defer src="./static/js/main.e75645eb.js"></script>

  <!-- Fetch shim: sanitize Open-Meteo params, preserve Request, and show startup errors -->
  <script>
    (() => {
      const rawFetch = window.fetch;
      const asReq = (input, init) =>
        (input instanceof Request) ? input : new Request(input, init);

      function isBad(v) {
        return v == null || v === '' || v === 'undefined' || v === 'null';
      }

      window.fetch = async (input, init) => {
        let req = asReq(input, init);
        const url = new URL(req.url, location.origin);

        const isMeteoForecast =
          url.hostname === 'api.open-meteo.com' && url.pathname.includes('/v1/forecast');

        if (isMeteoForecast) {
          // Sanitize timezone
          const tz = url.searchParams.get('timezone');
          if (isBad(tz)) url.searchParams.set('timezone', 'auto');

          // Ensure daily is valid
          const requiredDaily = 'weathercode,temperature_2m_max,temperature_2m_min';
          const daily = url.searchParams.get('daily');
          if (isBad(daily)) url.searchParams.set('daily', requiredDaily);

          // Drop any params that literally equal "undefined"
          for (const [k, v] of url.searchParams.entries()) {
            if (v === 'undefined') url.searchParams.delete(k);
          }

          // Rebuild request with sanitized URL, preserving method/headers/mode
          req = new Request(url.toString(), req);
        }

        const res = await rawFetch(req);

        // Helpful logging
        if (isMeteoForecast) {
          console.log('[Meteo]', res.status, url.pathname + url.search);
          if (!res.ok) {
            const text = await res.clone().text().catch(() => '');
            console.warn('[Meteo Error Body]', text);
          }
        }
        return res;
      };

      // Small banner so a thrown error doesn't look like "page not loading"
      const show = (msg) => {
        if (document.getElementById('boot-error')) return;
        const el = document.createElement('div');
        el.id = 'boot-error';
        el.textContent = 'Startup error: ' + msg;
        el.style.cssText =
          'position:fixed;left:50%;top:14px;transform:translateX(-50%);' +
          'background:#fee2e2;color:#7f1d1d;border:1px solid #fecaca;border-radius:12px;' +
          'padding:10px 14px;font:600 14px/1.3 Inter,system-ui;z-index:99999;' +
          'box-shadow:0 6px 18px rgba(0,0,0,.08)';
        document.body.appendChild(el);
      };
      window.addEventListener('error', e => show(e.error?.message || e.message));
      window.addEventListener('unhandledrejection', e => show(e.reason?.message || String(e.reason)));
    })();
  </script>
</body>

</html>